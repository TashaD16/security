# Правила именования аннотаций безопасности

## Общие правила именования аннотаций в Java

### 1. Стиль именования
- ✅ **UpperCamelCase (PascalCase)** - каждое слово с заглавной буквы
- ✅ Примеры: `@PreAuthorize`, `@PostAuthorize`, `@RequiresReadDeclaration`
- ❌ Не используйте: `@preAuthorize`, `@Requires_Read_Declaration`

### 2. Суффикс "Annotation"
- ❌ **НЕ нужно** добавлять суффикс "Annotation" к названию
- ✅ Правильно: `@RequiresReadDeclaration`
- ❌ Неправильно: `@RequiresReadDeclarationAnnotation`
- **Причина**: Аннотации уже идентифицируются символом `@` перед именем

### 3. Четкость назначения
- ✅ Название должно **ясно отражать назначение** аннотации
- ✅ Используйте глаголы или прилагательные, описывающие действие/требование
- ✅ Примеры: `@RequiresRead`, `@PermitAll`, `@Secured`, `@Authenticated`

## Нужно ли указывать "Security" в названии?

### ❌ НЕ обязательно

**Причины:**
1. **Пакетное пространство имен** - аннотации находятся в пакете `com.example.common.security.annotation`, что уже указывает на их назначение
2. **Контекст использования** - аннотации применяются в контроллерах, где их назначение очевидно
3. **Соглашения Spring Security** - стандартные аннотации Spring Security (`@PreAuthorize`, `@Secured`, `@RolesAllowed`) не содержат "Security" в названии

### ✅ Когда можно добавить префикс/суффикс

**Префиксы/суффиксы допустимы для:**
- **Группировки** аннотаций в IDE (автодополнение)
- **Избежания конфликтов** с другими аннотациями
- **Улучшения читаемости** в некоторых контекстах

**Примеры:**
- `@SecurityRequiresRead` - если нужна группировка
- `@RequiresReadSecurity` - менее предпочтительно
- `@SecureRead` - короткий вариант

## Анализ текущих аннотаций проекта

### Текущие аннотации:
1. `@RequiresReadDeclaration`
2. `@RequiresWriteDeclaration`
3. `@RequiresApproveDeclaration`
4. `@RequiresReadWare`
5. `@RequiresWriteWare`
6. `@RequiresWareInventory`
7. `@RequiresGeneralAccess`
8. `@PermitAll`

### ✅ Соответствие правилам:

**Хорошо:**
- ✅ Используют UpperCamelCase
- ✅ Нет суффикса "Annotation"
- ✅ Названия четко отражают назначение
- ✅ Находятся в пакете `security.annotation`
- ✅ Префикс "Requires" четко указывает на требование безопасности
- ✅ Имя описывает требуемое действие/ресурс

**Рекомендации (необязательные улучшения):**

Если хотите сделать более явным, что это аннотации безопасности, можно:

1. **Добавить префикс "Security"** (но это избыточно):
   - `@SecurityRequiresReadDeclaration` ❌ (избыточно)

2. **Использовать более короткие имена** (если пакет уже указывает на security):
   - `@RequiresReadDeclaration` → `@RequiresRead` (но тогда менее понятно, что это для declarations)
   - Текущие имена оптимальны для ясности ✅

3. **Следовать паттерну Spring Security** (текущий подход уже близок):
   - Spring Security: `@PreAuthorize("hasAuthority('READ')")`
   - Ваш проект: `@RequiresReadDeclaration` (более декларативно, без SpEL)

## Сравнение с Spring Security аннотациями

### Spring Security стандартные аннотации:
- `@PreAuthorize` - проверка перед выполнением
- `@PostAuthorize` - проверка после выполнения
- `@Secured` - проверка роли
- `@RolesAllowed` - проверка роли (JSR-250)

**Особенности:**
- Не содержат "Security" в названии
- Находятся в пакете `org.springframework.security.access.prepost`
- Короткие и емкие названия
- Используют параметры (SpEL выражения)

### Ваш подход:
- `@RequiresReadDeclaration` - более декларативный
- Без параметров (проще использовать)
- Более специфичные (для конкретных ресурсов)
- Находятся в пакете `com.example.common.security.annotation`

## Рекомендации для проекта

### ✅ Текущие названия ОПТИМАЛЬНЫ

**Преимущества текущего подхода:**
1. ✅ **Ясность**: Сразу понятно, что требуется (`RequiresReadDeclaration`)
2. ✅ **Декларативность**: Не нужно писать SpEL выражения
3. ✅ **Типобезопасность**: Компилятор проверит наличие аннотации
4. ✅ **Читаемость**: Код самодокументируемый
5. ✅ **Группировка**: Все аннотации начинаются с "Requires" (кроме `@PermitAll`)
6. ✅ **Пакетное пространство**: Пакет `security.annotation` уже указывает на назначение

### ❌ НЕ рекомендуется менять

**Не добавляйте:**
- ❌ "Security" в название (избыточно)
- ❌ "Annotation" в название (избыточно)
- ❌ Другие префиксы без необходимости

**Текущие названия соответствуют:**
- ✅ Java Code Conventions
- ✅ Best Practices для аннотаций
- ✅ Подходам Spring Security
- ✅ Принципам читаемости кода

## Исключение: @PermitAll

Аннотация `@PermitAll` уже используется в Java EE/Jakarta EE (`javax.annotation.security.PermitAll` / `jakarta.annotation.security.PermitAll`).

**Рекомендация:**
- Если используете Spring Security без JSR-250, ваша аннотация в порядке
- Если используете JSR-250, можно импортировать стандартную `@PermitAll`
- Для WebFlux (как в вашем проекте) - ваша реализация правильная

## Итоговые рекомендации

### ✅ Что делать:
1. **Оставить текущие названия** - они соответствуют всем правилам
2. **Использовать пакетное пространство** - `security.annotation` уже указывает на назначение
3. **Сохранять префикс "Requires"** - четко указывает на требование безопасности
4. **Документировать назначение** - добавлять JavaDoc к аннотациям

### ❌ Чего НЕ делать:
1. Не добавлять "Security" или "Annotation" в название
2. Не менять текущие названия без веской причины
3. Не создавать слишком длинные названия
4. Не использовать аббревиатуры без необходимости

## Вывод

**Текущие названия аннотаций ОПТИМАЛЬНЫ и соответствуют всем best practices:**

- ✅ Соответствуют Java Code Conventions
- ✅ Ясно отражают назначение
- ✅ Находятся в правильном пакете
- ✅ Не содержат избыточных префиксов/суффиксов
- ✅ Следуют паттернам Spring Security
- ✅ Обеспечивают читаемость и поддерживаемость

**Изменения НЕ требуются** - текущий подход правильный и соответствует industry standards.
